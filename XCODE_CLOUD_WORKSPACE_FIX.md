# Xcode Cloud Workspace Path Fix

## Problem

Xcode Cloud error: **"workspace App.xcworkspace does not exist at ios/App.xcworkspace"**

## Root Cause

Xcode Cloud is configured to look for the workspace at:
- ❌ **Wrong**: `ios/App.xcworkspace` 
- ✅ **Correct**: `ios/App/App.xcworkspace`

The workspace is located at `ios/App/App.xcworkspace` (relative to repository root), but Xcode Cloud workflow is configured with the wrong path.

## Solution

### Option 1: Fix Xcode Cloud Workflow Configuration (Recommended)

1. **Open Xcode:**
   ```bash
   open ios/App/App.xcworkspace
   ```

2. **Navigate to Xcode Cloud:**
   - Go to **Product** → **Xcode Cloud** → **View Workflows**
   - Or click on your project in the navigator, then select the **Cloud** tab

3. **Edit your workflow:**
   - Select your workflow
   - Click **Edit** or the workflow settings

4. **Update the workspace path:**
   - Find the **"Build Configuration"** section
   - Look for **"Workspace"** or **"Project"** field
   - Change from: `ios/App.xcworkspace`
   - Change to: `ios/App/App.xcworkspace`
   - **Important**: This is relative to the repository root

5. **Save the workflow**

6. **Trigger a new build** to verify the fix

### Option 2: Verify in Xcode Cloud Dashboard

1. Go to [developer.apple.com](https://developer.apple.com)
2. Navigate to **Xcode Cloud** → **Workflows**
3. Select your workflow
4. Click **Edit** or **Settings**
5. Check the **"Workspace Path"** field
6. Ensure it's set to: `ios/App/App.xcworkspace`

### Option 3: Create a New Workflow (If editing doesn't work)

1. **Delete the old workflow** (if possible)
2. **Create a new workflow:**
   - Product → Xcode Cloud → Create Workflow
   - When prompted for workspace, select: `ios/App/App.xcworkspace`
   - Complete the setup wizard

## Verification

After fixing the path, verify:

1. **Check build logs:**
   - The build should no longer show the workspace error
   - Look for "Pre-build" script execution
   - Check that CocoaPods installs successfully

2. **Verify workspace exists:**
   - The `ci_post_clone.sh` script creates the workspace
   - Check build logs for: `✅ Workspace created successfully!`

## Current Configuration

- **Repository Root**: `/` (root of the repo)
- **Workspace Location**: `ios/App/App.xcworkspace` (relative to repo root)
- **CI Scripts Location**: `ci_scripts/` (at repo root)
- **Podfile Location**: `ios/App/Podfile`

## Troubleshooting

### If the path still doesn't work:

1. **Check Xcode Cloud build logs:**
   - Look for the exact error message
   - Note the path it's looking for

2. **Verify workspace exists in repo:**
   ```bash
   ls -la ios/App/App.xcworkspace/
   ```
   - Should show `contents.xcworkspacedata`

3. **Check if workspace is in .gitignore:**
   - The workspace directory should NOT be in .gitignore
   - CocoaPods generates it, but it should be committed or generated by `ci_post_clone.sh`

4. **Verify ci_post_clone.sh runs:**
   - Check build logs for "Post-Clone" section
   - Should see: "✅ Post-clone script completed successfully!"

### Common Mistakes

- ❌ Using `ios/App.xcworkspace` (missing `App/` directory)
- ❌ Using `App.xcworkspace` (missing `ios/App/` prefix)
- ❌ Using absolute path instead of relative path
- ❌ Using `.xcodeproj` instead of `.xcworkspace`

## Quick Reference

**Correct Workspace Path for Xcode Cloud:**
```
ios/App/App.xcworkspace
```

**How to verify locally:**
```bash
cd /path/to/repo
ls -la ios/App/App.xcworkspace/contents.xcworkspacedata
# Should exist and be readable
```

## Next Steps

1. ✅ Update Xcode Cloud workflow configuration
2. ✅ Set workspace path to `ios/App/App.xcworkspace`
3. ✅ Save and trigger a new build
4. ✅ Monitor build logs for success
5. ✅ Verify the app builds correctly

---

**Last Updated:** November 2024
**Issue:** Xcode Cloud workspace path configuration

